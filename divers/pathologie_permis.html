<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Affections Médicales & Permis de Conduire (Arrêté 2022)</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Icons Lucide -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }

        .category-card {
            transition: all 0.2s ease-in-out;
        }
        
        .category-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Numéros de chapitres */
        .chapter-num {
            font-family: 'ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', monospace;
            font-weight: 700;
            opacity: 0.8;
            min-width: 35px;
            display: inline-block;
        }

        @media print {
            body { background-color: white; font-size: 11pt; }
            .no-print { display: none !important; }
            .category-card { 
                break-inside: avoid; 
                box-shadow: none; 
                border: 1px solid #ddd;
                margin-bottom: 1rem;
            }
            h1 { font-size: 1.4rem; color: black !important; }
            .chapter-num { color: #000 !important; }
        }
    </style>
</head>
<body class="text-slate-800">

    <!-- Header -->
    <header class="bg-slate-900 text-white p-6 shadow-lg no-print">
        <div class="max-w-7xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                <div>
                    <h1 class="text-2xl font-bold flex items-center gap-3">
                        <i data-lucide="file-text" class="w-8 h-8 text-blue-400"></i>
                        Affections & Permis (Arrêté 2022)
                    </h1>
                    <p class="text-slate-300 mt-1 text-sm">
                        Liste exhaustive des chapitres par Classe (I à VI).
                    </p>
                </div>
                <div class="bg-slate-800 p-3 rounded border border-slate-700 text-xs max-w-lg">
                    <strong class="text-blue-400 block mb-1">Règle d'or Médecin Traitant :</strong>
                    Si une pathologie ci-dessous est présente : <strong>1. Informer</strong> le patient du risque. <strong>2. Orienter</strong> vers un Médecin Agréé préfecture.
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-4 md:p-6">

        <!-- Search -->
        <div class="mb-6 relative no-print">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i data-lucide="search" class="text-slate-400 w-5 h-5"></i>
            </div>
            <input type="text" id="searchInput" 
                   class="block w-full pl-10 pr-3 py-3 border border-slate-300 rounded-lg leading-5 bg-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 shadow-sm" 
                   placeholder="Filtrer (ex: 1.6, diabète, épilepsie...)"
                   onkeyup="filterList()">
        </div>

        <!-- Grid 3 colonnes pour les 6 Classes -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="cardsContainer">

            <!-- CLASSE I : CARDIO -->
            <div class="category-card bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden group-item flex flex-col">
                <div class="bg-red-50 p-3 border-b border-red-100 flex items-center gap-2">
                    <span class="bg-red-600 text-white text-xs font-bold px-2 py-1 rounded">CLASSE I</span>
                    <h2 class="font-bold text-red-900">Pathologies Cardio-Vasculaires</h2>
                </div>
                <ul class="p-4 space-y-2 text-sm flex-1 overflow-y-auto max-h-[500px]">
                    <li class="searchable-item flex"><span class="chapter-num text-red-600">1.1</span> <span>Coronaropathie / Angor / Infarctus</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-red-600">1.2</span> <span>Troubles du rythme et de la conduction <span class="text-xs text-slate-500 block">(inclus Pacemakers & Défibrillateurs)</span></span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-red-600">1.3</span> <span>Syncope</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-red-600">1.4</span> <span>Accident Vasculaire Cérébral (AVC) <span class="text-xs text-slate-500 italic">-> Voir 4.4.3</span></span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-red-600">1.5</span> <span>Hypertension Artérielle (Maligne)</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-red-600">1.6</span> <span>Insuffisance Cardiaque Chronique</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-red-600">1.7</span> <span>Valvulopathies (et chirurgie valvulaire)</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-red-600">1.8</span> <span>Pathologies vasculaires (Anévrysmes aorte...)</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-red-600">1.9</span> <span>Dispositifs d'assistance cardiaque</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-red-600">1.10</span> <span>Cardiopathie congénitale</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-red-600">1.11</span> <span>Transplantation cardiaque</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-red-600">1.12</span> <span>Cardiomyopathies</span></li>
                </ul>
            </div>

            <!-- CLASSE II : OPHTALMO -->
            <div class="category-card bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden group-item flex flex-col">
                <div class="bg-cyan-50 p-3 border-b border-cyan-100 flex items-center gap-2">
                    <span class="bg-cyan-600 text-white text-xs font-bold px-2 py-1 rounded">CLASSE II</span>
                    <h2 class="font-bold text-cyan-900">Ophtalmologie</h2>
                </div>
                <ul class="p-4 space-y-2 text-sm flex-1">
                    <li class="searchable-item flex"><span class="chapter-num text-cyan-600">2.1</span> 
                        <div class="flex flex-col">
                            <span>Fonctions visuelles</span>
                            <span class="text-xs text-slate-500 pl-1 border-l-2 border-slate-100 mt-1">
                                - 2.1.1 Acuité visuelle<br>
                                - 2.1.2 Champ visuel<br>
                                - 2.1.3 Vision nocturne / Éblouissement / Couleurs
                            </span>
                        </div>
                    </li>
                    <li class="searchable-item flex mt-2"><span class="chapter-num text-cyan-600">2.2</span> 
                        <div class="flex flex-col">
                            <span>Autres pathologies oculaires</span>
                            <span class="text-xs text-slate-500 pl-1 border-l-2 border-slate-100 mt-1">
                                - 2.2.1 Chirurgie réfractive<br>
                                - 2.2.2 Mobilité (Diplopie, Strabisme, Nystagmus)
                            </span>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- CLASSE III : ORL / PNEUMO -->
            <div class="category-card bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden group-item flex flex-col">
                <div class="bg-teal-50 p-3 border-b border-teal-100 flex items-center gap-2">
                    <span class="bg-teal-600 text-white text-xs font-bold px-2 py-1 rounded">CLASSE III</span>
                    <h2 class="font-bold text-teal-900">ORL & Pneumologie</h2>
                </div>
                <ul class="p-4 space-y-2 text-sm flex-1">
                    <li class="searchable-item flex"><span class="chapter-num text-teal-600">3.1</span> 
                         <div class="flex flex-col">
                            <span>Déficience auditive (Surdité)</span>
                            <span class="text-xs text-slate-500 pl-1 border-l-2 border-slate-100 mt-1">
                                Critère : voix chuchotée à 1m, voix haute à 5m
                            </span>
                        </div>
                    </li>
                    <li class="searchable-item flex mt-2"><span class="chapter-num text-teal-600">3.2</span> <span>Troubles de l'équilibre (Vertiges, Ménière)</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-teal-600">3.3</span> <span>Port d'une canule trachéale</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-teal-600">3.4</span> <span>Insuffisance respiratoire / Oxygénothérapie</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-teal-600">3.5</span> <span>Syndrome des Apnées du Sommeil (SAS) <span class="text-xs text-slate-500 italic">-> Voir 4.3</span></span></li>
                </ul>
            </div>

            <!-- CLASSE IV : NEURO / PSY / ADDICTIONS -->
            <div class="category-card bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden group-item flex flex-col row-span-2 md:row-span-1">
                <div class="bg-purple-50 p-3 border-b border-purple-100 flex items-center gap-2">
                    <span class="bg-purple-600 text-white text-xs font-bold px-2 py-1 rounded">CLASSE IV</span>
                    <h2 class="font-bold text-purple-900">Neuro - Psy - Addictions</h2>
                </div>
                <ul class="p-4 space-y-2 text-sm flex-1 overflow-y-auto">
                    <li class="bg-orange-50 p-2 rounded border border-orange-100 mb-2">
                        <div class="searchable-item flex font-semibold text-orange-800"><span class="chapter-num text-orange-600">4.1</span> <span>Pratiques addictives (Alcool & Drogues)</span></div>
                    </li>
                    <li class="searchable-item flex"><span class="chapter-num text-purple-600">4.2</span> <span>Médicaments psychotropes (Risque conduite)</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-purple-600">4.3</span> <span>Troubles du sommeil (Apnées - SAS, Narcolepsie...)</span></li>
                    <li class="mt-2 mb-1 font-semibold text-purple-900 border-b border-slate-100 pb-1">4.4 Troubles Neurologiques</li>
                    <li class="searchable-item flex pl-2"><span class="chapter-num text-purple-500">4.4.1</span> <span>Épilepsie</span></li>
                    <li class="searchable-item flex pl-2"><span class="chapter-num text-purple-500">4.4.2</span> <span>Troubles cognitifs neuroévolutifs (Alzheimer...)</span></li>
                    <li class="searchable-item flex pl-2"><span class="chapter-num text-purple-500">4.4.3</span> <span>AVC et AIT (Accident Ischémique Transitoire)</span></li>
                    <li class="searchable-item flex pl-2"><span class="chapter-num text-purple-500">4.4.4</span> <span>Traumatisme crânien & lésions acquises</span></li>
                    <li class="searchable-item flex pl-2"><span class="chapter-num text-purple-500">4.4.5</span> <span>Autres (Tumeurs, SEP, Parkinson, Neuropathies...)</span></li>
                    <li class="searchable-item flex pl-2"><span class="chapter-num text-purple-500">4.4.6</span> <span>Troubles du développement intellectuel</span></li>
                    <li class="mt-2 mb-1 font-semibold text-purple-900 border-b border-slate-100 pb-1">4.5 Psychiatrie</li>
                    <li class="searchable-item flex pl-2"><span class="chapter-num text-purple-500">4.5</span> <span>Troubles psychiatriques</span></li>
                </ul>
            </div>

            <!-- CLASSE V : LOCOMOTEUR -->
            <div class="category-card bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden group-item flex flex-col">
                <div class="bg-indigo-50 p-3 border-b border-indigo-100 flex items-center gap-2">
                    <span class="bg-indigo-600 text-white text-xs font-bold px-2 py-1 rounded">CLASSE V</span>
                    <h2 class="font-bold text-indigo-900">Appareil Locomoteur</h2>
                </div>
                <ul class="p-4 space-y-2 text-sm flex-1">
                    <li class="searchable-item flex"><span class="chapter-num text-indigo-600">5.1</span> <span>Membres supérieurs (Amputation, paralysie, raideur)</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-indigo-600">5.2</span> <span>Membres inférieurs (idem)</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-indigo-600">5.3</span> <span>Lésions multiples des membres</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-indigo-600">5.4</span> <span>Rachis (Colonne vertébrale)</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-indigo-600">5.5</span> <span>Déficit post-traumatique/vasculaire (Hémiplégie...)</span></li>
                </ul>
            </div>

            <!-- CLASSE VI : METABOLISME -->
            <div class="category-card bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden group-item flex flex-col">
                <div class="bg-green-50 p-3 border-b border-green-100 flex items-center gap-2">
                    <span class="bg-green-600 text-white text-xs font-bold px-2 py-1 rounded">CLASSE VI</span>
                    <h2 class="font-bold text-green-900">Métabolisme & Greffes</h2>
                </div>
                <ul class="p-4 space-y-2 text-sm flex-1">
                    <li class="searchable-item flex"><span class="chapter-num text-green-600">6.1</span> <span>Insuffisance Rénale (Dialyse)</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-green-600">6.2</span> <span>Diabète (Risque hypoglycémique & Complications)</span></li>
                    <li class="searchable-item flex"><span class="chapter-num text-green-600">6.3</span> <span>Transplantation d'organe ou implant</span></li>
                </ul>
            </div>

        </div>

        <!-- Bouton vers Fiche Info -->
        <div class="mt-8 mb-4 flex justify-center no-print">
            <a href="generic_conduite.html" target="_blank" class="flex items-center gap-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-transform hover:scale-105">
                <i data-lucide="printer" class="w-6 h-6"></i>
                <span>Imprimer la Fiche d'Information Patient</span>
            </a>
        </div>
        <!-- Bouton vers Tableau des pathologies sommeil/documents/TABLEAU DES AFFECTIONS MEDICALES CONDUITE.pdf-->
        <div class="mt-8 mb-4 flex justify-center no-print">
            <a href="../sommeil/documents/TABLEAU%20DES%20AFFECTIONS%20MEDICALES%20CONDUITE.pdf" target="_blank" class="flex items-center gap-3 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-transform hover:scale-105">
                <i data-lucide="printer" class="w-6 h-6"></i>
                <span>Tableau des Affections</span>
            </a>
        </div>
        <!-- Bouton vers Legifrance -->
        <div class="mt-8 mb-4 flex justify-center no-print">
            <a href="https://www.legifrance.gouv.fr/loda/id/JORFTEXT000045464094" target="_blank" class="flex items-center gap-3 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-transform hover:scale-105">
                <span>Arrêté du 28 mars 2022 (Légifrance)</span>
            </a>
        </div>

    </main>

    <script>
        lucide.createIcons();

        function filterList() {
            const input = document.getElementById('searchInput');
            const filter = input.value.toLowerCase();
            const cards = document.getElementsByClassName('group-item');

            for (let i = 0; i < cards.length; i++) {
                const card = cards[i];
                const listItems = card.getElementsByClassName('searchable-item');
                let foundInCard = false;
                const title = card.querySelector('h2').innerText.toLowerCase();

                // Si le titre de la carte correspond, on garde tout
                if (title.includes(filter)) {
                    foundInCard = true;
                    // On s'assure que tous les items sont visibles
                    for (let j = 0; j < listItems.length; j++) {
                        listItems[j].style.opacity = "1";
                        listItems[j].style.display = ""; 
                    }
                } else {
                    // Sinon on cherche item par item
                    for (let j = 0; j < listItems.length; j++) {
                        const text = listItems[j].innerText.toLowerCase();
                        if (text.includes(filter)) {
                            foundInCard = true;
                            listItems[j].style.opacity = "1";
                            listItems[j].style.display = "";
                        } else {
                            // On masque les items qui ne matchent pas pour éclaircir
                            // Sauf si le filtre est vide
                            if(filter.length > 0) {
                                listItems[j].style.display = "none";
                            } else {
                                listItems[j].style.display = "";
                            }
                        }
                    }
                }

                if (foundInCard) {
                    card.style.display = "";
                } else {
                    card.style.display = "none";
                }
            }
        }
    </script>
</body>
</html>
